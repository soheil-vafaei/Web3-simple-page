{"ast":null,"code":"import { scheduleCommands } from './commands/ScheduledCommand.js';\n\nconst genericModelRun = (s, cmds, initialValue, runCmd, then) => {\n  return s.then(o => {\n    const {\n      model,\n      real\n    } = o;\n    let state = initialValue;\n\n    for (const c of cmds) {\n      state = then(state, () => {\n        return runCmd(c, model, real);\n      });\n    }\n\n    return state;\n  });\n};\n\nconst internalModelRun = (s, cmds) => {\n  const then = (_p, c) => c();\n\n  const setupProducer = {\n    then: fun => {\n      fun(s());\n      return undefined;\n    }\n  };\n\n  const runSync = (cmd, m, r) => {\n    if (cmd.check(m)) cmd.run(m, r);\n    return undefined;\n  };\n\n  return genericModelRun(setupProducer, cmds, undefined, runSync, then);\n};\n\nconst isAsyncSetup = s => {\n  return typeof s.then === 'function';\n};\n\nconst internalAsyncModelRun = async function (s, cmds) {\n  let defaultPromise = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Promise.resolve();\n\n  const then = (p, c) => p.then(c);\n\n  const setupProducer = {\n    then: fun => {\n      const out = s();\n      if (isAsyncSetup(out)) return out.then(fun);else return fun(out);\n    }\n  };\n\n  const runAsync = async (cmd, m, r) => {\n    if (await cmd.check(m)) await cmd.run(m, r);\n  };\n\n  return await genericModelRun(setupProducer, cmds, defaultPromise, runAsync, then);\n};\n\nexport function modelRun(s, cmds) {\n  internalModelRun(s, cmds);\n}\nexport async function asyncModelRun(s, cmds) {\n  await internalAsyncModelRun(s, cmds);\n}\nexport async function scheduledModelRun(scheduler, s, cmds) {\n  const scheduledCommands = scheduleCommands(scheduler, cmds);\n  const out = internalAsyncModelRun(s, scheduledCommands, scheduler.schedule(Promise.resolve(), 'startModel'));\n  await scheduler.waitAll();\n  await out;\n}","map":{"version":3,"names":["scheduleCommands","genericModelRun","s","cmds","initialValue","runCmd","then","o","model","real","state","c","internalModelRun","_p","setupProducer","fun","undefined","runSync","cmd","m","r","check","run","isAsyncSetup","internalAsyncModelRun","defaultPromise","Promise","resolve","p","out","runAsync","modelRun","asyncModelRun","scheduledModelRun","scheduler","scheduledCommands","schedule","waitAll"],"sources":["/Users/soheilvafaei/Documents/resume/Web3/web3 simple react web3 js/node_modules/fast-check/lib/esm/check/model/ModelRunner.js"],"sourcesContent":["import { scheduleCommands } from './commands/ScheduledCommand.js';\nconst genericModelRun = (s, cmds, initialValue, runCmd, then) => {\n    return s.then((o) => {\n        const { model, real } = o;\n        let state = initialValue;\n        for (const c of cmds) {\n            state = then(state, () => {\n                return runCmd(c, model, real);\n            });\n        }\n        return state;\n    });\n};\nconst internalModelRun = (s, cmds) => {\n    const then = (_p, c) => c();\n    const setupProducer = {\n        then: (fun) => {\n            fun(s());\n            return undefined;\n        },\n    };\n    const runSync = (cmd, m, r) => {\n        if (cmd.check(m))\n            cmd.run(m, r);\n        return undefined;\n    };\n    return genericModelRun(setupProducer, cmds, undefined, runSync, then);\n};\nconst isAsyncSetup = (s) => {\n    return typeof s.then === 'function';\n};\nconst internalAsyncModelRun = async (s, cmds, defaultPromise = Promise.resolve()) => {\n    const then = (p, c) => p.then(c);\n    const setupProducer = {\n        then: (fun) => {\n            const out = s();\n            if (isAsyncSetup(out))\n                return out.then(fun);\n            else\n                return fun(out);\n        },\n    };\n    const runAsync = async (cmd, m, r) => {\n        if (await cmd.check(m))\n            await cmd.run(m, r);\n    };\n    return await genericModelRun(setupProducer, cmds, defaultPromise, runAsync, then);\n};\nexport function modelRun(s, cmds) {\n    internalModelRun(s, cmds);\n}\nexport async function asyncModelRun(s, cmds) {\n    await internalAsyncModelRun(s, cmds);\n}\nexport async function scheduledModelRun(scheduler, s, cmds) {\n    const scheduledCommands = scheduleCommands(scheduler, cmds);\n    const out = internalAsyncModelRun(s, scheduledCommands, scheduler.schedule(Promise.resolve(), 'startModel'));\n    await scheduler.waitAll();\n    await out;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}